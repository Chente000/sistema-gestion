{# administrador/templates/administrador/panel_administrador.html #}

{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
    :root {
        --unefa-blue: #003366;
        --unefa-yellow: #FFD600;
        --unefa-gray-light: #F4F7FA;
        --unefa-gray-dark: #232e3c;
        --unefa-white: #fff;
        --unefa-red: #D32F2F;
    }

    body {
        background: var(--unefa-gray-light);
    }

    #sidebar-wrapper {
        min-height: 100vh;
        background: #003366; /* Azul UNEFA */
        color: var(--unefa-white);
        width: 250px;
    }

    #sidebar-wrapper .sidebar-heading {
        background: #FFD600; /* Amarillo UNEFA */
        color: #003366;
    }

    .list-group-item {
        background: transparent !important;
        color: #fff !important;
        border: none;
        font-weight: 500;
        opacity: 1;
        transition: background 0.2s, color 0.2s;
    }

    .list-group-item:hover,
    .list-group-item.active,
    .list-group-item:focus {
        background: #FFD600 !important; /* Amarillo UNEFA */
        color: #003366 !important;      /* Azul UNEFA */
    }

    .list-group-item i {
        color:rgb(236, 234, 222);
    }

    #page-content-wrapper {
        background: var(--unefa-gray-light);
    }

    .navbar {
        background: var(--unefa-yellow) !important;
        border-bottom: 1px solid var(--unefa-blue);
    }

    .navbar .nav-link, .navbar .navbar-brand {
        color: var(--unefa-blue) !important;
        font-weight: 500;
    }

    .navbar .dropdown-menu {
        border-radius: 0.5rem;
        box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    }

    .container-fluid {
        margin-top: 2rem;
    }

    .card-admin {
        background: var(--unefa-white);
        border-radius: 1rem;
        box-shadow: 0 4px 24px rgba(0,51,102,0.08);
        padding: 2rem 2.5rem;
        margin-bottom: 2rem;
    }

    .card-admin h2 {
        color: var(--unefa-blue);
        font-weight: 700;
        margin-bottom: 1.5rem;
    }

    @media (max-width: 991.98px) {
        #sidebar-wrapper {
            width: 100%;
            min-height: auto;
            position: relative;
        }
        .container-fluid {
            margin-top: 1rem;
        }
        .card-admin {
            padding: 1rem;
        }
    }
</style>
<div class="d-flex" id="wrapper">
    <!-- Sidebar -->
    <div id="sidebar-wrapper">
        <div class="sidebar-heading">Panel Administrador</div>
        <div class="list-group list-group-flush">
            <a href="{% url 'home:panel_principal' %}" class="list-group-item {% if request.resolver_match.url_name == 'panel_principal' %}active{% endif %}">
                <i class="fas fa-tachometer-alt"></i>Dashboard
            </a>
            {% if perms.administrador.manage_usuario %}
            <a href="#submenu-usuarios" data-bs-toggle="collapse" aria-expanded="false" class="list-group-item dropdown-toggle">
                <i class="fas fa-users"></i>Gestión de Usuarios
            </a>
            <div class="collapse" id="submenu-usuarios">
                <a href="{% url 'administrador:usuarios_aprobados' %}" class="list-group-item ps-5">Usuarios Aprobados</a>
                <a href="{% url 'administrador:revisar_solicitudes' %}" class="list-group-item ps-5">Solicitudes de Registro</a>
            </div>
            {% endif %}
            {% if perms.administrador.manage_configuracion_registro or perms.administrador.view_registro_cambios %}
            <a href="#submenu-config" data-bs-toggle="collapse" aria-expanded="false" class="list-group-item dropdown-toggle">
                <i class="fas fa-cogs"></i>Configuración
            </a>
            <div class="collapse" id="submenu-config">
                {% if perms.administrador.manage_configuracion_registro %}
                <a href="{% url 'administrador:configurar_registro' %}" class="list-group-item ps-5">Configuración de Registro</a>
                {% endif %}
                {% if perms.administrador.view_registro_cambios %}
                <a href="{% url 'administrador:registro_cambios' %}" class="list-group-item ps-5">Registro de Cambios</a>
                {% endif %}
            </div>
            {% endif %}
            {% if perms.administrador.manage_facultad or perms.administrador.manage_departamento or perms.administrador.manage_carrera %}
            <a href="#submenu-estructura" data-bs-toggle="collapse" aria-expanded="false" class="list-group-item dropdown-toggle">
                <i class="fas fa-building"></i>Estructura Académica
            </a>
            <div class="collapse" id="submenu-estructura">
                {% if perms.administrador.manage_facultad %}
                <a href="{% url 'administrador:lista_facultades' %}" class="list-group-item ps-5">Facultades</a>
                {% endif %}
                {% if perms.administrador.manage_departamento %}
                <a href="{% url 'administrador:lista_departamentos' %}" class="list-group-item ps-5">Departamentos</a>
                {% endif %}
                {% if perms.administrador.manage_carrera %}
                <a href="{% url 'administrador:lista_carrera' %}" class="list-group-item ps-5">Carreras</a>
                {% endif %}
            </div>
            {% endif %}
            {% if perms.administrador.manage_aula or perms.administrador.manage_tipo_aula or perms.administrador.manage_periodo or perms.administrador.manage_cargos %}
            <a href="#submenu-recursos" data-bs-toggle="collapse" aria-expanded="false" class="list-group-item dropdown-toggle">
                <i class="fas fa-box"></i>Recursos
            </a>
            <div class="collapse" id="submenu-recursos">
                {% if perms.administrador.manage_periodo %}
                <a href="{% url 'administrador:lista_periodos' %}" class="list-group-item ps-5">Períodos Académicos</a>
                {% endif %}
                {% if perms.administrador.manage_cargos %}
                <a href="{% url 'administrador:lista_cargos' %}" class="list-group-item ps-5">Cargos</a>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
        <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
            <button class="btn btn-outline-primary" id="menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mt-2 mt-lg-0">
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Inicio</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            {{ request.user.username }}
                        </a>
                        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="{% url 'perfiles:ver_perfil' %}">Perfil</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="{% url 'accounts:cerrar_sesion' %}">Cerrar Sesión</a>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <div class="container-fluid">
            <div class="card-admin">
                <h2>Bienvenido al Panel de Administración</h2>
                {% block content_admin_panel %}
                <!-- Aquí va el contenido específico de cada página -->
                {% endblock content_admin_panel %}
            </div>
        </div>
    </div>
</div>
{% endblock content %}

{% block extra_js %}
<script>
    var el = document.getElementById("wrapper");
    var toggleButton = document.getElementById("menu-toggle");
    toggleButton.onclick = function () {
        el.classList.toggle("toggled");
    };
</script>
{% endblock extra_js %}
